================================================================================
‚úÖ DOMAIN & SSL CONFIGURATION UPDATE - COMPLETE
================================================================================
Date: November 22, 2025
Server: service.dhakulchan.net (52.220.243.237)

================================================================================
üìã CHANGES SUMMARY
================================================================================

‚úÖ 1. DOMAIN NAME VERIFIED
   Old: server.dhakulchan.net
   New: service.dhakulchan.net ‚úì (Already configured in Nginx)
   Status: ACTIVE

‚úÖ 2. SSL CERTIFICATE CONFIGURED
   Domain: service.dhakulchan.net
   Certificate Type: Let's Encrypt (RSA)
   Validity: 79 days (Expires: February 09, 2026)
   Certificate Path: /etc/letsencrypt/live/service.dhakulchan.net/fullchain.pem
   Private Key Path: /etc/letsencrypt/live/service.dhakulchan.net/privkey.pem

‚úÖ 3. SSL AUTO-RENEWAL (88 DAYS) CONFIGURED
   Renewal Window: 88 days before expiry ‚úì
   Configuration File: /etc/letsencrypt/renewal/service.dhakulchan.net.conf
   Setting: renew_before_expiry = 88 days ‚úì

‚úÖ 4. CRON JOB CONFIGURED
   Schedule: Daily at 02:00 ‚úì
   Command: /usr/bin/certbot renew --quiet --deploy-hook /etc/letsencrypt/renewal-hooks/deploy/reload-services.sh
   Logs: /var/log/certbot-cron.log

‚úÖ 5. DEPLOYMENT HOOK CREATED
   Location: /etc/letsencrypt/renewal-hooks/deploy/reload-services.sh
   Permissions: Executable ‚úì
   Actions on Renewal:
     ‚Ä¢ Reload Nginx
     ‚Ä¢ Restart Gunicorn
     ‚Ä¢ Log to /var/log/certbot-renewal.log
     ‚Ä¢ System log via logger

‚úÖ 6. NGINX CONFIGURATION
   Server Name: service.dhakulchan.net ‚úì
   SSL Certificate: /etc/letsencrypt/live/service.dhakulchan.net/fullchain.pem ‚úì
   SSL Key: /etc/letsencrypt/live/service.dhakulchan.net/privkey.pem ‚úì
   Status: Active and serving HTTPS

‚úÖ 7. DOCUMENTATION UPDATED
   Files Updated:
     ‚Ä¢ deploy_production_full.sh
     ‚Ä¢ deploy_production_simple.sh
     ‚Ä¢ verify_deployment.sh
     ‚Ä¢ PRODUCTION_DEPLOYMENT_SUMMARY.txt
     ‚Ä¢ SERVER_QUICK_REFERENCE.txt
     ‚Ä¢ deploy/.env.production
     ‚Ä¢ deploy/gunicorn.conf.py

================================================================================
üîó NEW ACCESS URLS
================================================================================

Main Application:
  https://service.dhakulchan.net

Adminer Database Management:
  https://service.dhakulchan.net/adminer/
  
  Login Credentials:
    Server: localhost
    Username: voucher_user
    Password: VoucherPass2024!
    Database: voucher_system

SSH Access:
  ssh -i ~/.ssh/LightsailDefaultKey-ap-southeast-1.pem ubuntu@52.220.243.237

================================================================================
üîê SSL AUTO-RENEWAL DETAILS
================================================================================

Current Configuration:
  ‚Ä¢ Certificate Validity: 79 days remaining (as of Nov 22, 2025)
  ‚Ä¢ Renewal Trigger: Will auto-renew when 88 days remain before expiry
  ‚Ä¢ Next Possible Renewal: Immediately available (79 < 88)
  ‚Ä¢ Automatic Check: Daily at 02:00 via cron

Renewal Process:
  1. Cron job runs daily: 0 2 * * *
  2. Certbot checks if renewal needed (within 88-day window)
  3. If needed, obtains new certificate from Let's Encrypt
  4. Deployment hook executes automatically:
     - Reloads Nginx configuration
     - Restarts Gunicorn application server
     - Logs renewal to /var/log/certbot-renewal.log
  5. Services continue without interruption

Manual Commands:
  ‚Ä¢ Check certificate: sudo certbot certificates
  ‚Ä¢ Test renewal: sudo certbot renew --dry-run
  ‚Ä¢ Force renewal: sudo certbot renew --force-renewal
  ‚Ä¢ View logs: sudo tail -f /var/log/certbot-cron.log

================================================================================
üìä VERIFICATION COMMANDS
================================================================================

Check SSL Certificate:
  sudo certbot certificates

View Renewal Configuration:
  sudo cat /etc/letsencrypt/renewal/service.dhakulchan.net.conf | grep renew_before_expiry

Check Cron Job:
  sudo crontab -l | grep certbot

Test Deployment Hook:
  sudo /etc/letsencrypt/renewal-hooks/deploy/reload-services.sh

View Renewal Logs:
  sudo tail -f /var/log/certbot-renewal.log
  sudo tail -f /var/log/certbot-cron.log

Test HTTPS Access:
  curl -I https://service.dhakulchan.net
  curl -I https://service.dhakulchan.net/adminer/

Check Nginx Configuration:
  sudo nginx -T | grep -E 'server_name|ssl_certificate'

================================================================================
‚úÖ CHECKLIST - ALL COMPLETE
================================================================================

[‚úÖ] Domain configured: service.dhakulchan.net
[‚úÖ] SSL certificate verified and active
[‚úÖ] SSL auto-renewal set to 88 days
[‚úÖ] Deployment hook created and executable
[‚úÖ] Cron job scheduled for daily checks
[‚úÖ] Nginx serving HTTPS correctly
[‚úÖ] Adminer accessible at new URL
[‚úÖ] All documentation updated
[‚úÖ] Configuration files updated
[‚úÖ] Services running correctly

================================================================================
üéä CONFIGURATION COMPLETE!
================================================================================

The production server is now fully configured with:

‚úÖ Domain: service.dhakulchan.net
‚úÖ SSL Certificate: Valid for 79 days
‚úÖ Auto-Renewal: 88-day window (daily checks at 02:00)
‚úÖ Adminer: https://service.dhakulchan.net/adminer/

All services are operational and will automatically renew SSL certificates
88 days before expiry without manual intervention.

Last Updated: November 22, 2025
Status: OPERATIONAL ‚úì

================================================================================
